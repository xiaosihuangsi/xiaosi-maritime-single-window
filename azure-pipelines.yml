# .NET Desktop
# Build and run tests for .NET Desktop or Windows classic desktop solutions.
# Add steps that publish symbols, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/apps/windows/dot-net

trigger:
- main

stages:
- stage: Dev
  displayName: 'Development'
  jobs:
  - job: Build
    displayName: 'Build'
    pool:
      vmImage: 'macOS-latest'
    steps:
    - task: NuGetToolInstaller@1

    - task: NuGetCommand@2
      inputs:
        restoreSolution: '$(solution)'

    - task: VSBuild@1
      inputs:
        solution: '$(solution)'
        platform: '$(buildPlatform)'
        configuration: '$(buildConfiguration)'

    - task: VSTest@2
      inputs:
        platform: '$(buildPlatform)'
        configuration: '$(buildConfiguration)'

- stage: Test
  displayName: 'Testing'
  jobs:
  - job: Test
    displayName: 'Run Tests'
    pool:
      vmImage: 'macOS-latest'
    steps:
    # Add tasks for testing in the test environment

- stage: Prod
  displayName: 'Production'
  jobs:
  - job: Deploy
    displayName: 'Deploy to Production'
    pool:
      vmImage: 'macOS-latest'
    steps:
    # Add tasks for deploying to production
